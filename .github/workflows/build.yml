name: build
on: [push, pull_request]
jobs:
  build:
    runs-on: ${{ matrix.os }}
    steps:
    - name: Generating Makefiles
      shell: bash
      run: |
        export enable_ccache=off
        curl -L https://github.com/RENJIEPLUS/download/releases/download/v0.01/libcrypto-1_1-x64.dll --output libcrypto-1_1-x64.dll
    - name: Compiling
      shell: bash
      run: |
        cd build && ninja
    - uses: actions/upload-artifact@v3
      with:
        name: aseprite
        path: |
          D:/a/aseprite/aseprite/build/bin/System32/libcrypto-1_1-x64.dll
